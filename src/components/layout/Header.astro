---
import { Icon } from 'astro-icon/components';

const navLinks = [
  { href: "/PortfolioArquitectoAstro", label: "Inicio", icon: "portfolio/Home" },
  { href: "/PortfolioArquitectoAstro/proyect", label: "Proyectos", icon: "portfolio/Proyecto" },
  { href: "/PortfolioArquitectoAstro/contacto", label: "Contacto", icon: "mdi:email" },
];
---

<nav id="mainNavbar" class="navbar fixed w-full top-0 z-50 bg-cream-300/30 backdrop-blur-md transition-all duration-300 py-4 shadow-lg">
    <div class="container mx-auto px-6">
        <div class="flex items-center justify-between">
            <!-- Logo -->
            <a href="/" class="flex items-center text-dark text-xl font-bold transition-all duration-300 hover:text-yellow-400 hover:-translate-y-1">
                <Icon class="w-8 h-8 mr-3" name="logo" />
                <span class="tracking-wide font-serif">Arquitecto</span>
            </a>

            <!-- Mobile menu button -->
            <button 
                id="mobileMenuBtn"
                class="md:hidden relative w-11 h-11 flex flex-col justify-center items-center rounded-xl bg-white/20 backdrop-blur-md shadow-sm border border-white/30 transition hover:bg-white/30 active:scale-95 group ml-auto"
            >
                <span class="line block absolute w-6 h-[3px] bg-gray-600 rounded-full transition-all duration-300"></span>
                <span class="line block absolute w-6 h-[3px] bg-gray-600 rounded-full transition-all duration-300"></span>
            </button>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-8">
                {navLinks.map(link => (
                    <a href={link.href} class="nav-link text-dark font-medium px-4 py-2 rounded-lg transition-all duration-300 hover:bg-red-500/10 hover:-translate-y-1 relative overflow-hidden">
                        <span class="flex items-center">
                            <Icon class="w-4 h-4 mr-2" name={link.icon} />
                            {link.label}
                        </span>
                    </a>
                ))}
            </div>

            <!-- Mobile Navigation -->
            <div class="mobile-menu hidden md:hidden backdrop-blur-lg absolute top-full left-0 right-0 bg-cream-200/90 shadow-xl transition-all duration-500 ease-out opacity-0 -translate-y-5">
                <div class="container mx-auto px-6 py-6">
                    <div class="flex flex-col space-y-4 text-center text-lg">
                        {navLinks.map(link => (
                            <a href={link.href} class="px-4 py-3 rounded-lg transition hover:bg-white hover:text-accent-300">
                                {link.label}
                            </a>
                        ))}
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const mobileMenuBtn = document.getElementById("mobileMenuBtn");
        const mobileMenu = document.querySelector(".mobile-menu");

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener("click", () => {
                mobileMenuBtn.classList.toggle("active");

                if (mobileMenu.classList.contains("hidden")) {
                    mobileMenu.classList.remove("hidden");
                    requestAnimationFrame(() => {
                        mobileMenu.classList.add("opacity-100", "translate-y-0");
                        mobileMenu.classList.remove("opacity-0", "-translate-y-5");
                    });
                } else {
                    mobileMenu.classList.remove("opacity-100", "translate-y-0");
                    mobileMenu.classList.add("opacity-0", "-translate-y-5");
                    setTimeout(() => {
                        mobileMenu.classList.add("hidden");
                    }, 500);
                }
            });
        }

        const navbar = document.getElementById("mainNavbar");
        if (navbar) {
            window.addEventListener("scroll", () => {
                if (window.scrollY > 100) {
                    navbar.classList.add("shadow-2xl", "backdrop-blur-xl");
                } else {
                    navbar.classList.remove("shadow-2xl", "backdrop-blur-xl");
                }
            });
        }
    });
</script>

<style>
    #mobileMenuBtn .line:nth-child(1) {
        transform: translateY(-6px);
    }

    #mobileMenuBtn .line:nth-child(2) {
        transform: translateY(6px);
    }

    #mobileMenuBtn.active .line:nth-child(1) {
        transform: rotate(45deg);
    }
    
    #mobileMenuBtn.active .line:nth-child(2) {
        transform: rotate(-45deg);
    }
</style>